
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>rails-4-2-features - Rashmi Yadav</title>
  <meta name="author" content="Rashmi Yadav">

  
  <meta name="description" content="Rails-4-2-features Aug 28th, 2014 Rails 4.2 beta is releasing soon with some nice major features Active Job, ActionMailer #deliver_later
Adequate &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://raysrashmi.com/2014/08/28/rails-4-2-features">
  <link href="/favicon.png" rel="icon">
  <link href='http://fonts.googleapis.com/css?family=Quicksand:300,400' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.feedburner.com/raysrashmi" rel="alternate" title="Rashmi Yadav" type="application/atom+xml">
  <script src="/js/jquery.js"></script>
  <script src="/js/bootstrap-collapse.js"></script>
  <script src="/js/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/js/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-42359259-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <div class="navbar navbar-inverse navbar-static-top">
  	<div class="navbar-inner">
  	  <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".navbar-responsive-collapse">
          <span class="fui-menu-24"></span>
        </a>
  	  	<div class="nav-collapse collapse navbar-responsive-collapse" style="height:0;">
  	      <ul class="nav">
    
    <li >
    <a href="/">Home</a>
    </li>
    
    <li >
    <a href="/about">About</a>
    </li>
    
    <li >
    <a href="/blog/archives">Archives</a>
    </li>
    
</ul>

<ul class="nav pull-right">
    
    <li><a href="http://github.com/raysrashmi" title="Github Profile"><i class="icon-github-sign social-navbar"></i></a></li>
    
    
    
    <li><a href="http://twitter.com/raysrashmi" title="Twitter Profile"><i class="icon-twitter-sign social-navbar"></i></a></li>
    
    
    
    
    <li>
    <a href="http://feeds.feedburner.com/raysrashmi" rel="alternate" type="application/rss+xml" class='feed_burner'>
      <img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/>
    </a>
    </li>
    
</ul>

  	    </div>
  	  </div>
  	</div>
  </div>
  <div class="container" id="main">
    <div class="span12">
      <div class="row-fluid">
        <div id="content">
          <div>
<article class="hentry" role="article">
  

  <header>
  <div class="jumbotron">
    Rails-4-2-features
	<h5>








  


<i class="icon-calendar-empty"></i> <time datetime="2014-08-28T15:42:00+02:00" pubdate data-updated="true">Aug 28<span>th</span>, 2014</time></h5>
  </div>
</header>

<div class="span6 social-sharing">
  <div class="sharing">
  <div class="addthis_toolbox addthis_default_style ">
  
  
  <a class="addthis_button_tweet"></a>
  
  
  <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>

</div>

  <div class="row-fluid">
    <div class="span12">
      <p><a href='http://edgeguides.rubyonrails.org/4_2_release_notes.html'>Rails 4.2 beta</a> is releasing soon with some nice major features</p>

<ol>
<li><a href='http://edgeguides.rubyonrails.org/4_2_release_notes.html#active-job-action-mailer-deliver-later'>Active Job, ActionMailer #deliver_later</a></li>
<li><a href='http://edgeguides.rubyonrails.org/4_2_release_notes.html#adequate-record'>Adequate records</a></li>
<li><a href='http://edgeguides.rubyonrails.org/4_2_release_notes.html#web-console'>Web console</a></li>
<li><a href='http://edgeguides.rubyonrails.org/4_2_release_notes.html#foreign-key-support'>Foreign key support</a></li>
</ol>


<p>But part from this <a href='http://edgeguides.rubyonrails.org/4_2_release_notes.html'>Rails 4.2 beta</a> will give us other features which is good to know</p>

<!--more-->


<h2><code>required</code> option for singular associations (<code>belongs_to</code> and <code>has_one</code>)</h2>

<p>Current way of validating presence of association is &ndash;:</p>

<p>For example &ndash;:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span>
</span><span class='line'>  <span class="n">belongs_to</span> <span class="ss">:account</span>
</span><span class='line'>  <span class="n">validates</span> <span class="ss">:account</span><span class="p">,</span> <span class="ss">presence</span><span class="p">:</span> <span class="kp">true</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>In Rails 4.2 we can set <code>required</code> option to true which will validate presence of association</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span>
</span><span class='line'>  <span class="n">belongs_to</span> <span class="ss">:account</span><span class="p">,</span> <span class="ss">required</span><span class="p">:</span> <span class="kp">true</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>We can also use it for <code>has_one</code> association</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Account</span> <span class="o">&lt;</span> <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span>
</span><span class='line'>  <span class="n">has_one</span> <span class="ss">:user</span><span class="p">,</span> <span class="ss">required</span><span class="p">:</span> <span class="kp">true</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h2><code>required</code> option in migration and model generator</h2>

<p>When we generate model we can pass <code>required</code> option  for references</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="n">rails</span> <span class="n">generate</span> <span class="n">model</span> <span class="no">Comment</span> <span class="ss">commentable</span><span class="p">:</span><span class="n">references</span><span class="p">{</span><span class="n">required</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Model file will be generated like</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Comment</span> <span class="o">&lt;</span> <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span>
</span><span class='line'>  <span class="n">belongs_to</span> <span class="ss">:commentable</span><span class="p">,</span> <span class="ss">required</span><span class="p">:</span> <span class="kp">true</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>commentable associatio is required here.</p>

<p>And migration file will be</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">CreateComments</span> <span class="o">&lt;</span> <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Migration</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">change</span>
</span><span class='line'>    <span class="n">create_table</span> <span class="ss">:comments</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
</span><span class='line'>      <span class="n">t</span><span class="o">.</span><span class="n">references</span> <span class="ss">:commentable</span><span class="p">,</span> <span class="ss">index</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span> <span class="ss">null</span><span class="p">:</span> <span class="kp">false</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">t</span><span class="o">.</span><span class="n">timestamps</span> <span class="ss">null</span><span class="p">:</span> <span class="kp">false</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>It set <code>null: false</code> for references.</p>

<p>We can also pass it with <code>polymorphic</code> option</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">rails</span> <span class="n">generate</span> <span class="n">model</span> <span class="no">Comment</span> <span class="ss">commentable</span><span class="p">:</span><span class="n">references</span><span class="p">{</span><span class="n">required</span><span class="p">,</span> <span class="n">polymorphic</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This <code>required</code> option can also be passed while generating migration</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">rails</span> <span class="n">generate</span> <span class="n">migration</span> <span class="no">AddAccountToUsers</span> <span class="ss">account</span><span class="p">:</span><span class="n">references</span><span class="p">{</span><span class="n">required</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>validate &amp;&amp; validate!</h2>

<h3>validate</h3>

<p>It runs all validation and return <code>true</code> if no error found  otherwise return <code>false</code>.</p>

<p>It is alias of <code>valid?</code> method.</p>

<h3>validate!</h3>

<p>It runs all validation and return <code>true</code> if no error found and
raise <code>ActiveRecord::RecordInvalid</code> if any validation fails</p>

<h2><code>with_options</code> without explicit receiver</h2>

<p>Now in Rails 4.2 we don&rsquo;t need to pass explicit receiver to <code>with_options</code> until it is required</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span>
</span><span class='line'> <span class="n">with_options</span> <span class="k">if</span><span class="p">:</span> <span class="ss">:is_admin?</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">validates</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">presence</span><span class="p">:</span> <span class="kp">true</span>
</span><span class='line'>    <span class="n">validates</span> <span class="ss">:email</span><span class="p">,</span> <span class="ss">presence</span><span class="p">:</span> <span class="kp">true</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h2>touch multiple attributes</h2>

<p>You can update multiple attributes at once with <code>touch</code> method</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">a</span> <span class="o">=</span> <span class="no">Article</span><span class="o">.</span><span class="n">first</span>
</span><span class='line'><span class="n">a</span><span class="o">.</span><span class="n">touch</span><span class="p">(</span><span class="ss">:published_at</span><span class="p">,</span> <span class="ss">:created_at</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>pretty_print support for ActiveRecord::Base objects</h2>

<p>If you have active base record with many attributes and you want to print in console or in logs it just come in one line which is not so clear
Rails 4.2 pretty print support for active base record</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">pp</span> <span class="n">u</span>
</span></code></pre></td></tr></table></div></figure>


<p><img src="/images/pretty_print.png" /></p>

<h2>Skip gems</h2>

<p>We can skip adding gems to Gem file while creating new app with <code>--skip-gems</code> option</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">rails</span> <span class="kp">new</span> <span class="o">&lt;</span><span class="n">app</span> <span class="nb">name</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">skip</span><span class="o">-</span><span class="n">gems</span> <span class="n">turbolinks</span> <span class="n">coffee</span><span class="o">-</span><span class="n">rails</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Empty your database</h2>

<p>Rails provides us few rake tasks to create/delete database and to run migrations.</p>

<p>There is new task <code>rake db:purge</code> to empty database for current environment.</p>

<p>It removes your data and tables from database and of course we pass environment <code>RAILS_ENV</code> like any other rake task.</p>

<h2>Transform Hash Values</h2>

<p>To modify Hash values call <code>tarnsform_values</code> it accepts a block and apply the block operation to each value of hash</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">a</span> <span class="o">=</span> <span class="p">{</span><span class="ss">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="ss">b</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="ss">c</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
</span><span class='line'><span class="n">a</span><span class="o">.</span><span class="n">transform_values</span><span class="p">{</span><span class="o">|</span><span class="n">a</span><span class="o">|</span><span class="n">a</span><span class="o">*</span><span class="mi">2</span><span class="p">}</span> <span class="c1">#=&gt; {:a=&gt;2, :b=&gt;4, :c=&gt;6}</span>
</span></code></pre></td></tr></table></div></figure>


<p>There is also bang version <code>transform_values!</code> which change original hash</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">a</span> <span class="o">=</span> <span class="p">{</span><span class="ss">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="ss">b</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="ss">c</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
</span><span class='line'><span class="n">a</span><span class="o">.</span><span class="n">transform_values!</span><span class="p">{</span><span class="o">|</span><span class="n">a</span><span class="o">|</span><span class="n">a</span><span class="o">*</span><span class="mi">2</span><span class="p">}</span> <span class="c1">#=&gt; {:a=&gt;2, :b=&gt;4, :c=&gt;6}</span>
</span><span class='line'><span class="n">a</span> <span class="c1">#=&gt; {:a=&gt;2, :b=&gt;4, :c=&gt;6}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Truncate String by words</h2>

<p><code>truncate_words</code> method truncate a string by given number of words</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="s1">&#39;This is fantastic place in this world&#39;</span><span class="o">.</span><span class="n">truncate_words</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1">#=&gt; &quot;This is fantastic...&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>bin/setup</h2>

<p>We always need some set of commands to bootstrap our application.</p>

<p>Now in Rails 4.2 there is default <code>bin/setup</code> script where we can have all the commands required to bootstrap our application.</p>

<p>There are some defaults commands written but we can add more</p>

<p>Default bin/setup file look like</p>

<p><img src="/images/bin_setup.png" /></p>

<h2>Support for PostgreSQL citext data type</h2>

<p>Rails 4.2 added support for <a href='http://www.postgresql.org/docs/9.0/static/citext.html'><code>citext</code></a>
column type in PostgreSQL adapter.</p>

<p>You have to enable extension before running migration</p>

<p><code>citext</code> column type provides a case-insensitive character string type.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">execute</span> <span class="s2">&quot;CREATE EXTENSION IF NOT EXISTS citext&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>For example we have a <code>users</code> table with bio column as <code>citext</code> type</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">User</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="ss">bio</span><span class="p">:</span> <span class="s1">&#39;Developer&#39;</span><span class="p">)</span>
</span><span class='line'><span class="c1">#=&gt;SELECT &quot;users&quot;.* FROM &quot;users&quot; WHERE &quot;users&quot;.&quot;bio&quot; = $1  [[&quot;bio&quot;, &quot;Developer&quot;]]</span>
</span><span class='line'><span class="c1">#=&gt; #&lt;ActiveRecord::Relation [#&lt;User id: 1, name: nil, email: &quot;test@example.com&quot;, created_at: &quot;2014-08-30 17:51:17&quot;, updated_at: &quot;2014-08-30 17:51:17&quot;, role: nil, bio: &quot;developer&quot;&gt;]&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here you can see bio column value is &lsquo;developer&rsquo; still in <code>where</code> query with &lsquo;Developer&rsquo; values gave use the user. Internally <code>citext</code></p>

    </div>
  </div>



  <footer>
    <hr>
    
    <div class="row-fluid">
      
      <div class="span6">
        <p class="meta">
        
        


        </p>
      </div>
      
      <div class="span6 social-sharing">
        <div class="sharing">
  <div class="addthis_toolbox addthis_default_style ">
  
  
  <a class="addthis_button_tweet"></a>
  
  
  <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>

      </div>
      
      
    </div>
    
    <div class="row-fluid">
      <div class="span12">
        <p class="meta">
          
            <a class="basic-alignment left" href="/2014/07/23/rails-routes-constraints/" title="Previous Post: Rails Routing Constraints">&laquo; Rails Routing Constraints</a>
          
          
        </p>
      </div>
    </div>
  </footer>
</article>

</div>



        </div>
      </div>
      <div class="row-fluid">
        <footer class="footer-page" role="contentinfo">
          <p>
  Copyright &copy; 2014 - Rashmi Yadav -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span> - Theme by <a href="http://alexgaribay.com">Alex Garibay</a>
</p>


        </footer>
      </div>
    </div>
  </div>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
